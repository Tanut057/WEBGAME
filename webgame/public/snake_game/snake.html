<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snake Game</title>
  <style>
    canvas {
      border: 1px solid #000;
    }
  </style>
</head>
<body>
    <body class="bodyID123">
        <div class="item2"> <a href="/logout"> <button>Logout</button></a> 
          <button onclick="goBack()">Go Back</button>

          <script>
              function goBack() {
                  window.history.back();
              }
          </script>
         
        </div>
      </body>
  <canvas id="snakeCanvas" width="400" height="400"></canvas>
  <script>
    // Snake Game
const canvas = document.getElementById('snakeCanvas');
const ctx = canvas.getContext('2d');

const box = 20;
let score = 0;
let highScore = 0;
let snake = [];
snake[0] = { x: 10 * box, y: 10 * box }; // Initial position

let food = {
  x: Math.floor(Math.random() * 20) * box,
  y: Math.floor(Math.random() * 20) * box
};

// Direction
let d;
let speed = 100; // Initial speed

document.addEventListener('keydown', direction);

function direction(event) {
  if (event.keyCode == 37 && d !== 'RIGHT') {
    d = 'LEFT';
  } else if (event.keyCode == 38 && d !== 'DOWN') {
    d = 'UP';
  } else if (event.keyCode == 39 && d !== 'LEFT') {
    d = 'RIGHT';
  } else if (event.keyCode == 40 && d !== 'UP') {
    d = 'DOWN';
  }
}

function draw() {
  // Draw canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw snake
  for (let i = 0; i < snake.length; i++) {
    ctx.fillStyle = i === 0 ? '#4CAF50' : '#2E7D32';
    ctx.fillRect(snake[i].x, snake[i].y, box, box);
    ctx.strokeStyle = '#000';
    ctx.strokeRect(snake[i].x, snake[i].y, box, box);
  }

  // Draw food
  ctx.fillStyle = '#FF5733';
  ctx.fillRect(food.x, food.y, box, box);

  // Move snake
  let snakeX = snake[0].x;
  let snakeY = snake[0].y;

  if (d === 'LEFT') snakeX -= box;
  if (d === 'UP') snakeY -= box;
  if (d === 'RIGHT') snakeX += box;
  if (d === 'DOWN') snakeY += box;

  // Check if snake eats food
  if (snakeX === food.x && snakeY === food.y) {
    score++;
    if (score > highScore) {
      highScore = score;
    }
    food = {
      x: Math.floor(Math.random() * 20) * box,
      y: Math.floor(Math.random() * 20) * box
    };
    // Increase speed when the snake eats food
    speed -= 5; // You can adjust the decrement value
  } else {
    // Remove the tail
    snake.pop();
  }

  // Check if snake hits the wall or itself
  if (
    snakeX < 0 ||
    snakeY < 0 ||
    snakeX >= canvas.width ||
    snakeY >= canvas.height ||
    collision(snakeX, snakeY, snake)
  ) {
    // Reset game
    snake = [];
    snake[0] = { x: 10 * box, y: 10 * box };
    score = 0;
    speed = 100; // Reset speed

    // Display game over message
    ctx.fillStyle = '#000';
    ctx.font = '30px Arial';
    ctx.fillText('Game Over', canvas.width / 2 - 80, canvas.height / 2);
    ctx.font = '20px Arial';
    ctx.fillText('Your Score: ' + score, canvas.width / 2 - 50, canvas.height / 2 + 30);
    ctx.fillText('Press any key or click to play again', canvas.width / 2 - 180, canvas.height / 2 + 60);

    document.addEventListener('keydown', resetGame);
    canvas.addEventListener('click', resetGame);
  }

  // Add new head
  const newHead = { x: snakeX, y: snakeY };
  snake.unshift(newHead);

  // Display score
  ctx.fillStyle = '#000';
  ctx.font = '20px Arial';
  ctx.fillText('Score: ' + score, box, box);
  ctx.fillText('High Score: ' + highScore, box, 2 * box);

  // Continue the game loop with the updated speed
  setTimeout(draw, speed);
}

function collision(x, y, array) {
  for (let i = 0; i < array.length; i++) {
    if (x === array[i].x && y === array[i].y) {
      return true;
    }
  }
  return false;
}

function resetGame(event) {
  if (event.keyCode || event.type === 'click') {
    document.removeEventListener('keydown', resetGame);
    canvas.removeEventListener('click', resetGame);

    // Reset game variables
    snake = [];
    snake[0] = { x: 10 * box, y: 10 * box };
    score = 0;
    speed = 100; // Reset speed

    // Remove game over message
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Restart the game
    draw();
  }
}

// Start the game
draw();
</script>
</body>
</html>
